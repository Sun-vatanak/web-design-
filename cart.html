<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="./assets/style/bootstrap.min.css" />
    <link rel="stylesheet" href="./assets/style/main.css" />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <title>E-Commerce Store</title>
    <style>
        .logo {
            flex-shrink: 0;
            width: 50px;
            height: 50px;
            position: relative;
        }
        body {
            background-color: #eef3f6 !important;
        }
        .swiper {
            width: 100%;
            height: 485px;
        }
        .cart-counter {
            font-size: 0.6rem;
            padding: 3px 6px;
        }
        .bi-cart-fill {
            position: relative;
        }
        .swiper-slide {
            text-align: center;
            font-size: 18px;
            background: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        .swiper-slide img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
        }
        .bg-img img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .swiper {
            margin-left: auto;
            margin-right: auto;
        }
        .slide-content {
            position: relative;
            z-index: 10;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
        }
        .hero {
            height: 500px;
        }
        .hero-left {
            height: 500px;
        }
        @media (max-width: 1200px) {
            .hero {
                width: 100%;
                height: 500px !important;
            }
            .swiper-slide {
                height: 600px !important;
            }
            .col-md-6 .hero-left {
                width: 100%;
                height: 500px !important;
            }
        }
        @media (max-width: 768px) {
            .hero {
                height: 750px !important;
            }
            .hero-left {
                height: 200px !important;
            }
        }
        /* Modal styles */
        .modal-cart {
            max-width: 800px;
        }
        .cart-item-img {
            width: 80px;
            height: 80px;
            object-fit: cover;
        }
    </style>
</head>
<body>


    <!-- Cart Modal -->
    <div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="cartModalLabel">Your Shopping Cart</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="modal-cart-items">
                        <p class="text-center">Your cart is empty</p>
                    </div>
                    <div class="cart-totals mt-4 border-top pt-3">
                        <div class="d-flex justify-content-between mb-2">
                            <span>Subtotal:</span>
                            <span>$<span id="modal-cart-subtotal">0.00</span></span>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Shipping:</span>
                            <span>$0.00</span>
                        </div>
                        <div class="d-flex justify-content-between fw-bold fs-5">
                            <span>Total:</span>
                            <span>$<span id="modal-cart-total">0.00</span></span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Continue Shopping</button>
                    <button type="button" class="btn btn-primary" id="checkout-btn">Proceed to Checkout</button>
                </div>
            </div>
        </div>
    </div>

    <main>
        
        <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-duration="1000">
            <div class="card border-0 p-3 product-card" data-id="1" data-name="Anachak Bok Lahong II (Wat Phnom)" data-price="15.55" data-image="./assets/img/banner/image2.png">
                <div class="card-header border-0 bg-white p-0">
                    <a href="./Shop/shop.html" class="d-block">
                        <img src="./assets/img/banner/image2.png" class="card-img-top w-100 h-img h-100" alt="Product Image" />
                    </a>
                </div>
                <div class="card-body border-0 p-0 py-2">
                    <div class="">
                        <span>Drink</span> <br />
                        <span class="fs-5">Anachak Bok Lahong II (Wat Phnom)</span>
                        <br />
                        <span class="text-primary fs-5 fw-bold">$ 15.55</span>
                        <span>/ Free Delivery</span>
                    </div>
                    <div class="mt-3 d-flex justify-content-between align-items-center">
                        <button class="btn btn-outline-primary add-to-cart">
                            ADD TO CART <i class="bi bi-cart-fill"></i>
                        </button>
                        <button class="btn btn-outline-primary">
                            <i class="bi bi-heart-fill"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- More product cards... -->
    </main>

    <footer class="mt-3 bg-white">
       
    </footer>

    <!-- Scripts -->
    <script src="./assets/script/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // Initialize AOS and Swiper
        AOS.init();
        var swiper = new Swiper(".mySwiper", {
            spaceBetween: 30,
            loop: true,
            centeredSlides: true,
            autoplay: {
                delay: 3000,
                disableOnInteraction: false,
            },
            pagination: {
                el: ".swiper-pagination",
                clickable: true,
            },
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev",
            },
        });

        // Shopping Cart Functionality
        $(document).ready(function() {
            // Initialize cart from localStorage or empty array
            let cart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
            const cartModal = new bootstrap.Modal(document.getElementById('cartModal'));
            
            // Update cart counter in header
            function updateCartCounter() {
                const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
                $('.cart-counter').remove();
                
                if(totalItems > 0) {
                    $('#cart-icon').append(`
                        <span class="cart-counter position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                            ${totalItems}
                        </span>
                    `);
                }
            }
            
            // Update modal cart display
            function updateModalCart() {
                const $cartItems = $('#modal-cart-items');
                const $subtotal = $('#modal-cart-subtotal');
                const $total = $('#modal-cart-total');
                
                $cartItems.empty();
                
                if (cart.length === 0) {
                    $cartItems.append('<p class="text-center">Your cart is empty</p>');
                    $('#checkout-btn').prop('disabled', true);
                } else {
                    let subtotal = 0;
                    
                    cart.forEach(item => {
                        const itemTotal = item.price * item.quantity;
                        subtotal += itemTotal;
                        
                        $cartItems.append(`
                            <div class="cart-item mb-3 d-flex align-items-center" data-id="${item.id}">
                                <img src="${item.image}" alt="${item.name}" class="cart-item-img me-3 rounded">
                                <div class="flex-grow-1">
                                    <h6 class="mb-1">${item.name}</h6>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="d-flex align-items-center">
                                            <button class="btn btn-sm btn-outline-secondary minus">-</button>
                                            <span class="mx-2">${item.quantity}</span>
                                            <button class="btn btn-sm btn-outline-secondary plus">+</button>
                                        </div>
                                        <div>
                                            <span class="fw-bold">$${(item.price * item.quantity).toFixed(2)}</span>
                                            <button class="btn btn-sm btn-outline-danger ms-2 remove-item">
                                                <i class="bi bi-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `);
                    });
                    
                    $subtotal.text(subtotal.toFixed(2));
                    $total.text(subtotal.toFixed(2));
                    $('#checkout-btn').prop('disabled', false);
                }
            }
            
            // Add to cart button click handler
            $(document).on('click', '.add-to-cart', function() {
                const product = $(this).closest('.product-card');
                const id = product.data('id') || Math.floor(Math.random() * 1000);
                const name = product.data('name') || product.find('.card-title').text();
                const price = parseFloat(product.data('price')) || 
                            parseFloat(product.find('.text-primary').text().replace('$', '').trim());
                const image = product.data('image') || product.find('img').attr('src');
                
                // Check if item already exists in cart
                const existingItem = cart.find(item => item.id === id);
                
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({
                        id: id,
                        name: name,
                        price: price,
                        image: image,
                        quantity: 1
                    });
                }
                
                // Show add to cart animation
                const button = $(this);
                button.html('<i class="bi bi-check-lg"></i> ADDED');
                setTimeout(() => {
                    button.html('ADD TO CART <i class="bi bi-cart-fill"></i>');
                }, 1000);
                
                updateCartCounter();
                saveCartToLocalStorage();
                
                // Show brief notification
                showToast('Item added to cart!');
            });
            
            // Save cart to localStorage
            function saveCartToLocalStorage() {
                localStorage.setItem('shoppingCart', JSON.stringify(cart));
            }
            
            // Handle quantity changes in modal
            $('#modal-cart-items').on('click', '.minus', function() {
                const $cartItem = $(this).closest('.cart-item');
                const id = $cartItem.data('id');
                const item = cart.find(item => item.id === id);
                
                if (item.quantity > 1) {
                    item.quantity -= 1;
                    updateModalCart();
                    updateCartCounter();
                    saveCartToLocalStorage();
                }
            });
            
            $('#modal-cart-items').on('click', '.plus', function() {
                const $cartItem = $(this).closest('.cart-item');
                const id = $cartItem.data('id');
                const item = cart.find(item => item.id === id);
                
                item.quantity += 1;
                updateModalCart();
                updateCartCounter();
                saveCartToLocalStorage();
            });
            
            // Handle item removal in modal
            $('#modal-cart-items').on('click', '.remove-item', function() {
                const $cartItem = $(this).closest('.cart-item');
                const id = $cartItem.data('id');
                
                cart = cart.filter(item => item.id !== id);
                updateModalCart();
                updateCartCounter();
                saveCartToLocalStorage();
                
                showToast('Item removed from cart');
            });
            
            // Checkout button handler
            $('#checkout-btn').click(function() {
                alert('Proceeding to checkout with ' + cart.reduce((total, item) => total + item.quantity, 0) + ' items');
                // In a real app, you would redirect to a checkout page
            });
            
            // Cart icon click handler
            $('#cart-icon').click(function(e) {
                e.preventDefault();
                updateModalCart();
                cartModal.show();
            });
            
            // Initialize cart counter on page load
            updateCartCounter();
            
            // Toast notification function
            function showToast(message) {
                const toast = $(`
                    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
                        <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
                            <div class="toast-body d-flex justify-content-between align-items-center">
                                ${message}
                                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                            </div>
                        </div>
                    </div>
                `);
                
                $('body').append(toast);
                
                setTimeout(() => {
                    toast.remove();
                }, 3000);
            }
        });
    </script>
</body>
</html>